<!DOCTYPE html>

<html lang="ru">

<head>
  <!-- jQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <script>
    function signIn() {
      var name = $("#name").val();
      var pass = $("#pass").val();
      var data = {name: name, pass: pass};

      $.ajax({
        type: 'POST',
        url: 'http://localhost:56582/sign_in',
        data: window.btoa(JSON.stringify(data)),
        dataType: 'json',  // Expected response type.
      }).done(function(res) {
        if (!res.error) {
          var url = 'http://localhost:8000?authKey=' + res.authKey;
          window.location.replace(url);
        } else {
          console.error(res.error);
        }
      });
    }
  </script>
</head>

<body>
  <div class="container-fluid">
    <div id="sign_in_form" style="margin: 20% auto 20% auto; width: 150px">
      <p>Вход</p>
      <form onsubmit="signIn(); return false;">
        <input id="name" type="text" placeholder="Имя" class="form-control">
        <input id="pass" type="password" placeholder="Пароль" class="form-control">
        <button type="submit" class="btn btn-block btn-primary">
          Готово!
        </button>
      </form>
    </div>
  </div>
</body>

</html>
